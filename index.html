<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç”Ÿæ­»ä¹‹é–“ â€” LIFE IS WHAT</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Share+Tech+Mono&family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
<style>
:root {
    --c-bg: #030405;
    --c-panel: rgba(8, 12, 18, 0.95);
    --c-border: #1a2a3a;
    --c-accent: #00f3ff;
    --c-fatal: #ff2a2a;
    --c-crit: #ffae00;
    --c-acc: #00ff41;
    --c-dim: #3a4a5a;
    --c-soul: #a855f7;
    --f-mono: 'Share Tech Mono', monospace;
    --f-head: 'Orbitron', sans-serif;
    --f-text: 'Noto Sans TC', sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    background: var(--c-bg);
    color: #e0e6ed;
    font-family: var(--f-text);
    overflow: hidden; /* é˜²æ­¢æ»¾å‹•ï¼Œç›´åˆ°é€²å…¥ Monitor */
    height: 100vh;
}

/* ===== è¦–åœ–åˆ‡æ›ç³»çµ± ===== */
.view-container {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    transition: opacity 1.5s ease-in-out, transform 1.5s ease-in-out;
}

/* è¦–åœ– 1: ç´…å­—è¡æ“Š (Intro) */
#intro-view {
    z-index: 100;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: #000;
    cursor: pointer;
}
#intro-view.hidden {
    opacity: 0;
    pointer-events: none;
    transform: scale(1.1);
}

/* è¦–åœ– 2: å„€è¡¨æ¿ (Monitor) */
#monitor-view {
    z-index: 50;
    opacity: 0;
    overflow-y: auto; /* å…è¨±å„€è¡¨æ¿æ»¾å‹• */
    padding-bottom: 50px;
}
#monitor-view.active {
    opacity: 1;
}

/* ===== Intro æ¨£å¼ ===== */
.huge-number {
    font-family: var(--f-head);
    font-size: clamp(4rem, 15vw, 12rem);
    color: var(--c-fatal);
    font-weight: 900;
    text-shadow: 0 0 50px rgba(255, 0, 0, 0.5);
    line-height: 1;
    animation: heartBeat 1.5s infinite;
}
.intro-sub {
    font-family: var(--f-mono);
    color: #666;
    margin-top: 20px;
    letter-spacing: 2px;
    font-size: clamp(12px, 2vw, 16px);
}
.glitch-text {
    position: relative;
}
.glitch-text::before, .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: #000;
}
.glitch-text::before {
    left: 2px; text-shadow: -1px 0 #00ffff;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim-1 5s infinite linear alternate-reverse;
}
.glitch-text::after {
    left: -2px; text-shadow: -1px 0 #ff00ff;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim-2 5s infinite linear alternate-reverse;
}

@keyframes heartBeat {
    0% { transform: scale(1); text-shadow: 0 0 50px rgba(255,0,0,0.5); }
    15% { transform: scale(1.05); text-shadow: 0 0 80px rgba(255,0,0,0.8); }
    30% { transform: scale(1); text-shadow: 0 0 50px rgba(255,0,0,0.5); }
    45% { transform: scale(1.02); text-shadow: 0 0 60px rgba(255,0,0,0.6); }
    60% { transform: scale(1); text-shadow: 0 0 50px rgba(255,0,0,0.5); }
}
@keyframes glitch-anim-1 {
    0% { clip: rect(20px, 9999px, 80px, 0); }
    20% { clip: rect(60px, 9999px, 10px, 0); }
    100% { clip: rect(10px, 9999px, 90px, 0); }
}

/* ===== Monitor å…±ç”¨æ¨£å¼ ===== */
.monitor-grid {
    display: grid;
    grid-template-columns: 320px 1fr 320px;
    gap: 15px;
    padding: 15px;
    max-width: 1600px;
    margin: 0 auto;
    min-height: calc(100vh - 100px);
}
.panel {
    background: var(--c-panel);
    border: 1px solid var(--c-border);
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 0 30px rgba(0,0,0,0.5);
}
.p-head {
    background: rgba(20, 30, 40, 0.8);
    padding: 10px 15px;
    border-bottom: 1px solid var(--c-border);
    font-family: var(--f-head);
    font-size: 12px;
    color: var(--c-accent);
    display: flex;
    justify-content: space-between;
    align-items: center;
    letter-spacing: 1px;
}

@media (max-width: 1024px) {
    .monitor-grid { grid-template-columns: 1fr; }
    #ecg-container { display: none; }
}

/* æ¨¡æ…‹è¦–çª—æ¨£å¼ */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.95); z-index: 999;
    display: flex; align-items: center; justify-content: center;
    opacity: 0; pointer-events: none; transition: opacity 0.5s;
    backdrop-filter: blur(5px);
}
.modal-overlay.active { opacity: 1; pointer-events: all; }
.modal-content {
    width: 90%; max-width: 800px;
    background: #0a0a0a; border: 1px solid var(--c-dim);
    border-radius: 8px; padding: 30px; text-align: center;
    box-shadow: 0 0 50px rgba(0,0,0,0.8);
}
.modal-step { display: none; }
.modal-step.active { display: block; animation: fadeIn 0.5s; }
.btn-choice {
    background: transparent; border: 1px solid var(--c-accent); color: var(--c-accent);
    padding: 15px 30px; margin: 10px; font-family: var(--f-head);
    cursor: pointer; transition: 0.3s; font-size: 16px;
}
.btn-choice:hover { background: var(--c-accent); color: #000; box-shadow: 0 0 20px var(--c-accent); }
.btn-amen {
    background: var(--c-soul); border: none; color: #fff;
    padding: 10px 40px; border-radius: 30px; font-size: 18px;
    margin-top: 20px; cursor: pointer;
    box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
}
@keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
@keyframes pulse { 0%,100% { opacity:0.5; } 50% { opacity:1; } }
</style>
</head>
<body>

<!-- è¦–åœ– 1: ç´…å­—è¡æ“Š -->
<div id="intro-view" class="view-container" onclick="enterMonitor()">
    <div class="huge-number glitch-text" id="death-ticker" data-text="0">0</div>
    <div class="intro-sub">å…¨çƒé›¢ä¸–äººæ•¸ (è‡ªæ‚¨é€²å…¥é é¢)</div>
    <div style="margin-top:50px; border:1px solid #333; padding:10px 30px; border-radius:30px; opacity:0.7; font-size:12px; transition:0.3s;">
        [ é»æ“Šä»»æ„è™•é€²å…¥ ]
    </div>
</div>

<!-- è¦–åœ– 2: å„€è¡¨æ¿ -->
<div id="monitor-view" class="view-container">
    <!-- Header -->
    <header style="padding:15px; border-bottom:2px solid var(--c-fatal); display:flex; justify-content:space-between; align-items:center; background:rgba(0,0,0,0.8);">
        <div>
            <div style="font-family:var(--f-head); font-size:24px; color:var(--c-fatal);">VITAL LIFE MONITOR</div>
            <div style="font-size:12px; color:#666; font-family:var(--f-mono);">V9.0 | GLOBAL DEATH WATCH</div>
        </div>
        <!-- è£é£¾ç”¨å¿ƒé›»åœ– -->
        <div id="ecg-container" style="width:200px; height:50px; border:1px solid #333; background:#000; position:relative; overflow:hidden;">
            <canvas id="ecg-canvas" style="width:100%; height:100%; opacity:0.8;"></canvas>
        </div>
    </header>

    <div class="monitor-grid">
        <!-- å·¦å´é¢æ¿ï¼šå…¨çƒäº‹ä»¶æµ -->
        <div class="panel">
            <div class="p-head">
                <span>ğŸ“¡ INCOMING FEED</span>
                <span>æ¯ç§’ç´„ 2.0 äººé›¢ä¸–</span>
            </div>
            <!-- æœå°‹èˆ‡éæ¿¾ -->
            <div style="padding:10px; border-bottom:1px solid var(--c-border); display:flex; gap:5px;">
                <input type="text" id="search-input" placeholder="æœå°‹..." 
                       style="flex:1; background:#111; border:1px solid #333; color:#fff; padding:5px; font-family:var(--f-mono);">
            </div>
            <div id="log-stream" style="flex:1; overflow-y:auto; font-family:var(--f-mono); font-size:12px; padding:10px;">
                <!-- JS å°‡åœ¨æ­¤å¡«å…¥æ•¸æ“š -->
                <div style="padding:20px; text-align:center; color:#666;">åˆå§‹åŒ–æ•¸æ“šéˆæ¥ä¸­...</div>
            </div>
        </div>

        <!-- ä¸­é–“é¢æ¿ï¼šä½ çš„ç”Ÿå‘½å„€è¡¨æ¿ -->
        <div class="panel">
            <div class="p-head">
                <span>ğŸ‘¤ YOUR VITAL STATUS</span>
                <span>ç”Ÿå‘½å€’æ•¸</span>
            </div>
            
            <!-- å“²ç†æ©«å¹… -->
            <div style="padding:20px; text-align:center; border-bottom:1px solid #333; background:rgba(255,255,255,0.02);">
                <div id="random-quote" style="font-size:16px; font-style:italic; color:#ddd; margin-bottom:5px;">"äººç”Ÿè‡ªå¤èª°ç„¡æ­»ï¼Œç•™å–ä¸¹å¿ƒç…§æ±—é’"</div>
                <div id="quote-source" style="font-size:12px; color:#666;">â€” æ–‡å¤©ç¥¥</div>
            </div>

            <!-- æ•¸æ“šç¶²æ ¼ -->
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; padding:15px;">
                <div style="background:rgba(0,0,0,0.3); padding:15px; text-align:center; border:1px solid #333;">
                    <div style="font-size:11px; color:#888;">ä½ å·²æ´»äº† (å¤©)</div>
                    <div id="days-lived" style="font-family:var(--f-head); font-size:28px; color:#fff;">---</div>
                </div>
                <div style="background:rgba(0,0,0,0.3); padding:15px; text-align:center; border:1px solid var(--c-crit);">
                    <div style="font-size:11px; color:#888;">å‡è¨­å‰©é¤˜ (å¤©)</div>
                    <div id="days-left" style="font-family:var(--f-head); font-size:28px; color:var(--c-crit);">---</div>
                </div>
            </div>

            <!-- ç”Ÿå‘½é€²åº¦ -->
            <div style="padding:15px; margin:10px 15px; background:rgba(0,0,0,0.5); border:1px solid #333;">
                <div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:5px;">
                    <span>LIFE PROGRESS</span>
                    <span id="life-percent">0%</span>
                </div>
                <div style="height:8px; background:#111; border-radius:4px; overflow:hidden;">
                    <div id="life-bar" style="height:100%; width:0%; background:var(--c-accent); transition:width 1s;"></div>
                </div>
                <div style="margin-top:10px; text-align:center;">
                    <input type="number" id="user-age" value="30" min="1" max="100" 
                           style="background:#111; border:1px solid #444; color:#fff; padding:4px; width:50px; text-align:center;">
                    <span style="font-size:12px; color:#888;">æ­² (è¼¸å…¥å¾ŒæŒ‰ Enter)</span>
                </div>
            </div>
            
            <!-- æ¯æ—¥ç¶“æ–‡ -->
            <div style="padding:20px; border-top:1px solid var(--c-border); margin-top:auto;">
                <div style="color:var(--c-acc); font-size:12px; margin-bottom:5px;">ğŸ“– æ¯æ—¥æ™ºæ…§</div>
                <div style="font-size:14px; line-height:1.6; color:#ddd;">
                    "å…¶å¯¦æ˜å¤©å¦‚ä½•ï¼Œä½ å€‘é‚„ä¸çŸ¥é“ã€‚ä½ å€‘çš„ç”Ÿå‘½æ˜¯ç”šéº¼å‘¢ï¼Ÿä½ å€‘åŸä¾†æ˜¯ä¸€ç‰‡é›²éœ§ï¼Œå‡ºç¾å°‘æ™‚å°±ä¸è¦‹äº†ã€‚"
                </div>
            </div>
        </div>

        <!-- å³å´é¢æ¿ï¼šå‡ºè·¯ -->
        <div class="panel">
            <div class="p-head">
                <span>âš–ï¸ THE WAY OUT</span>
                <span>æ°¸æ†è¦–è§’</span>
            </div>

            <div style="padding:20px; border-bottom:1px solid #333;">
                <h3 style="color:var(--c-soul); margin-bottom:10px;">ä»Šç”Ÿ vs æ°¸æ†</h3>
                <p style="font-size:13px; color:#aaa; line-height:1.6;">
                    è‚‰é«”æœƒæœ½å£ï¼Œæ¦®è¯å¦‚èŠ±è‰å‡‹è¬ã€‚<br>
                    éˆé­‚å»æ˜¯æ°¸å­˜çš„ï¼Œä½ è¦å¾€ä½•è™•å»ï¼Ÿ
                </p>
            </div>

            <div style="padding:20px; border-bottom:1px solid #333;">
                <h3 style="color:var(--c-acc); margin-bottom:10px;">ç”¦é†’ vs æ˜æ²‰</h3>
                <p style="font-size:13px; color:#aaa; line-height:1.6;">
                    æ˜æ²‰è€…ï¼šæ—¥å¾©ä¸€æ—¥ï¼Œä¸å•æ­¸æœŸã€‚<br>
                    ç”¦é†’è€…ï¼šæ•¸ç®—æ—¥å­ï¼Œç‚ºæ°¸æ†é å‚™ã€‚
                </p>
            </div>

            <!-- IF IT WERE YOU æŒ‰éˆ• -->
            <div onclick="openModal()" 
                 style="margin-top:auto; padding:30px; background:linear-gradient(135deg, #220505, #000); 
                        border-top:2px solid var(--c-fatal); text-align:center; cursor:pointer; transition:0.3s;">
                <div style="font-family:var(--f-head); font-size:24px; color:var(--c-fatal); letter-spacing:2px;">IF IT WERE YOU</div>
                <div style="font-size:12px; color:#666; margin-top:5px;">å¦‚æœæ˜¯ä½ ï¼Ÿ</div>
                <div style="font-size:11px; color:#ff4444; margin-top:10px; animation:pulse 2s infinite;">[ é»æ“Šå°‹æ‰¾å‡ºè·¯ ]</div>
            </div>
        </div>
    </div>
</div>

<!-- æ¨¡æ…‹è¦–çª—çµæ§‹ -->
<div class="modal-overlay" id="modal-root">
    <div class="modal-content">
        <!-- æ­¥é©Ÿ 1: é¸æ“‡ -->
        <div class="modal-step active" id="step-1">
            <h2 style="font-family:var(--f-head); color:var(--c-accent); margin-bottom:20px;">é¸æ“‡ä½ çš„è·¯å¾‘</h2>
            <p style="color:#ccc; margin-bottom:30px;">å¦‚æœç”Ÿå‘½åªå‰©æœ€å¾Œä¸€åˆ†é˜ï¼Œä½ æƒ³æŠ“ä½ä»€éº¼ï¼Ÿ</p>
            <button class="btn-choice" onclick="goToStep2('bridge')">ç¦éŸ³æ©‹ (Gospel Bridge)</button>
            <button class="btn-choice" onclick="goToStep2('colors')">äº”è‰²ç¦éŸ³ (5 Colors)</button>
            <div style="margin-top:20px; font-size:12px; color:#666; cursor:pointer;" onclick="closeModal()">[ å–æ¶ˆè¿”å› ]</div>
        </div>

        <!-- æ­¥é©Ÿ 2: ç¦±å‘Š/ç¢ºèª -->
        <div class="modal-step" id="step-2">
            <h2 style="color:var(--c-soul);">åœ¨ä½ è§€çœ‹ä¹‹å‰...</h2>
            <div style="background:rgba(255,255,255,0.05); padding:20px; border-radius:8px; margin:20px 0; text-align:left; font-size:14px; line-height:1.6;">
                <p>é€™ä¸åƒ…åƒ…æ˜¯ä¸€å€‹å½±ç‰‡ï¼Œé€™æ˜¯ä¸€å€‹é—œæ–¼ä½ éˆé­‚æ­¸å®¿çš„é‚€è«‹ã€‚</p>
                <p>å¦‚æœä½ é¡˜æ„æ‰“é–‹å¿ƒé–€ï¼Œè«‹åœ¨å¿ƒä¸­é»˜å¿µï¼šã€Œæˆ‘é¡˜æ„äº†è§£çœŸç†ã€‚ã€</p>
            </div>
            <button class="btn-amen" onclick="goToStep3()">é˜¿å€‘ (AMEN)</button>
        </div>

        <!-- æ­¥é©Ÿ 3: æ’­æ”¾å½±ç‰‡ -->
        <div class="modal-step" id="step-3">
            <div style="position:relative; width:100%; padding-bottom:56.25%; background:#000; margin-bottom:15px;">
                <div id="video-placeholder" style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#555;">
                    [ å½±ç‰‡è¨Šè™Ÿå»ºç«‹ä¸­... ]
                </div>
                <iframe id="video-frame" style="position:absolute; top:0; left:0; width:100%; height:100%; border:0;" allowfullscreen></iframe>
            </div>
            
            <!-- æ¨¡æ“¬è³‡æ–™å‚³è¼¸é€²åº¦æ¢ -->
            <div style="display:flex; justify-content:space-between; color:var(--c-accent); font-size:10px; font-family:var(--f-mono);">
                <span>DATA TRANSFER...</span>
                <span id="video-timer">00:00</span>
            </div>
            <div style="height:2px; background:#222; width:100%; margin-top:5px;">
                <div id="transfer-bar" style="height:100%; background:var(--c-accent); width:0%;"></div>
            </div>

            <!-- 4åˆ†30ç§’å¾Œå‡ºç¾çš„é¸é … -->
            <div id="final-options" style="margin-top:30px; display:none; opacity:0; transition:opacity 1s;">
                <div style="display:flex; flex-direction:column; gap:10px;">
                    <a href="https://e.pcloud.link/publink/show?code=kZt8zaZd7iPCbuRK7mXuE6Lg4fjEJ933Sr7" target="_blank" class="btn-choice" style="border-color:var(--c-acc); color:var(--c-acc); text-decoration:none;">
                        ğŸ“¥ ä¸‹è¼‰è–ç¶“è³‡è¨Š (pCloud)
                    </a>
                    <a href="good-news.html" class="btn-choice" style="border-color:var(--c-fatal); color:var(--c-fatal); text-decoration:none;">
                        ğŸ”´ äº†è§£ä¸–ç•Œçš„æœ«äº† (Seven Years)
                    </a>
                    <button onclick="closeModal()" style="background:transparent; border:none; color:#666; cursor:pointer; margin-top:10px;">
                        è¿”å›ç›£æ§å„€è¡¨æ¿
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ===== é…ç½®å€ =====
const CONFIG = {
    deathRatePerSec: 2.0, // WHO 2.0 æ¨™æº–
    targetDate: new Date('2027-10-01'), // å¹è§’ç¯€
    videoLinks: {
        // è«‹åœ¨æ­¤å¡«å…¥å¾ pCloud å–å¾—çš„çœŸå¯¦å½±ç‰‡é€£çµ (Embed URL)
        bridge: "https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1", // ç¯„ä¾‹(è«‹æ›¿æ›)
        colors: "https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1"  // ç¯„ä¾‹(è«‹æ›¿æ›)
    }
};

// å…¨åŸŸè®Šæ•¸
let deathCount = 0;
let deathInterval;

// ===== 1. å•Ÿå‹•æµç¨‹ =====
document.addEventListener('DOMContentLoaded', () => {
    startDeathCounter();
    initECG();
    updateLifeStats();
    
    // ç¶å®šå¹´é½¡è¼¸å…¥
    document.getElementById('user-age').addEventListener('change', (e) => {
        updateLifeStats(e.target.value);
    });

    // æ¨¡æ“¬è¼‰å…¥æ—¥èªŒ
    mockLogData();
});

function startDeathCounter() {
    // å¿«é€Ÿè·³å‹•çš„æ•¸å­—æ•ˆæœ
    const ticker = document.getElementById('death-ticker');
    deathInterval = setInterval(() => {
        deathCount += CONFIG.deathRatePerSec / 10; // æ¯ 100ms æ›´æ–°ä¸€æ¬¡
        ticker.innerText = Math.floor(deathCount).toLocaleString();
        ticker.setAttribute('data-text', Math.floor(deathCount));
    }, 100);
}

// ===== 2. é€²å…¥ Monitor =====
function enterMonitor() {
    // åœæ­¢é¦–é è¨ˆæ•¸å™¨å‹•ç•«ï¼Œæ”¹ç‚ºå¾Œå°é‹è¡Œ
    
    const intro = document.getElementById('intro-view');
    const monitor = document.getElementById('monitor-view');
    
    intro.classList.add('hidden');
    
    setTimeout(() => {
        intro.style.display = 'none';
        monitor.classList.add('active');
        document.body.style.overflow = 'auto'; // å…è¨±æ»¾å‹•
    }, 1500);
}

// ===== 3. ç”Ÿå‘½è¨ˆç®—å™¨ =====
function updateLifeStats(ageInput = 30) {
    const age = parseInt(ageInput) || 30;
    const lifeExp = 85;
    const daysLived = age * 365;
    const daysLeft = Math.max(0, (lifeExp - age) * 365);
    const percent = Math.min(100, ((age / lifeExp) * 100)).toFixed(1);

    document.getElementById('days-lived').innerText = daysLived.toLocaleString();
    document.getElementById('days-left').innerText = daysLeft.toLocaleString();
    
    document.getElementById('life-percent').innerText = percent + "%";
    const bar = document.getElementById('life-bar');
    bar.style.width = percent + "%";

    // é¡è‰²é‚è¼¯
    if(percent > 80) bar.style.background = 'var(--c-fatal)';
    else if(percent > 50) bar.style.background = 'var(--c-crit)';
    else bar.style.background = 'linear-gradient(90deg, var(--c-acc), var(--c-crit))';
}

// ===== 4. IF IT WERE YOU æ¨¡æ…‹è¦–çª—é‚è¼¯ =====
let currentVideo = '';

function openModal() {
    document.getElementById('modal-root').classList.add('active');
    document.getElementById('step-1').classList.add('active');
    document.getElementById('step-2').classList.remove('active');
    document.getElementById('step-3').classList.remove('active');
    document.getElementById('final-options').style.display = 'none';
}

function closeModal() {
    document.getElementById('modal-root').classList.remove('active');
    document.getElementById('video-frame').src = ''; // åœæ­¢å½±ç‰‡
}

function goToStep2(videoType) {
    currentVideo = CONFIG.videoLinks[videoType];
    document.getElementById('step-1').classList.remove('active');
    document.getElementById('step-2').classList.add('active');
}

function goToStep3() {
    document.getElementById('step-2').classList.remove('active');
    document.getElementById('step-3').classList.add('active');
    
    // é–‹å§‹æ’­æ”¾èˆ‡è¨ˆæ™‚
    const frame = document.getElementById('video-frame');
    frame.src = currentVideo;
    
    startVideoTimer();
}

function startVideoTimer() {
    let seconds = 0;
    const targetSeconds = 270; // 4åˆ†30ç§’
    const timerDisplay = document.getElementById('video-timer');
    const bar = document.getElementById('transfer-bar');
    const finalOptions = document.getElementById('final-options');
    
    const interval = setInterval(() => {
        seconds++;
        
        // æ ¼å¼åŒ–æ™‚é–“ MM:SS
        let m = Math.floor(seconds / 60).toString().padStart(2, '0');
        let s = (seconds % 60).toString().padStart(2, '0');
        timerDisplay.innerText = `${m}:${s}`;
        
        // é€²åº¦æ¢
        let progress = Math.min((seconds / targetSeconds) * 100, 100);
        bar.style.width = progress + "%";
        
        if (seconds >= targetSeconds) {
            clearInterval(interval);
            timerDisplay.innerText = "DOWNLOAD COMPLETE";
            finalOptions.style.display = "block";
            setTimeout(() => finalOptions.style.opacity = 1, 50);
        }
    }, 1000); // æ­£å¸¸é€Ÿåº¦ 1000ms
}

// ===== 5. å¿ƒé›»åœ–ç‰¹æ•ˆ =====
function initECG() {
    const cvs = document.getElementById('ecg-canvas');
    if(!cvs) return;
    const ctx = cvs.getContext('2d');
    let width = cvs.width = cvs.offsetWidth;
    let height = cvs.height = cvs.offsetHeight;
    
    let data = new Array(width).fill(height/2);
    
    function draw() {
        ctx.clearRect(0, 0, width, height);
        ctx.beginPath();
        ctx.strokeStyle = '#00ff41';
        ctx.lineWidth = 1.5;
        
        for(let i=0; i<width; i++) {
            if(i===0) ctx.moveTo(i, data[i]);
            else ctx.lineTo(i, data[i]);
        }
        ctx.stroke();
        
        data.shift();
        let y = height/2;
        if(Math.random() < 0.02) y = height/2 - 15;
        else if(Math.random() < 0.02) y = height/2 + 10;
        else y = height/2 + (Math.random()-0.5)*2;
        data.push(y);
        requestAnimationFrame(draw);
    }
    draw();
}

// æ¨¡æ“¬æ—¥èªŒ (å¯æ›¿æ›ç‚ºå¯¦éš› API)
function mockLogData() {
    const stream = document.getElementById('log-stream');
    const samples = [
        { cat: 'FATAL', title: 'çªç™¼å¿ƒè‡Ÿé©Ÿåœ - 35æ­²ç”·æ€§, è¾¦å…¬å®¤å€’ä¸‹', time: '10:05' },
        { cat: 'CRIT', title: 'åš´é‡è»Šç¦ - å±¯é–€å…¬è·¯ 3è»Šç›¸æ’', time: '09:42' },
        { cat: 'FATAL', title: 'ä½æ‰€æ˜è¿·ä¸æ²» - 72æ­²ç¨å±…é•·è€…', time: '09:15' },
        { cat: 'ACC', title: 'å·¥æ¥­æ„å¤– - å»ºç¯‰åœ°ç›¤é«˜è™•å¢®ä¸‹', time: '08:55' },
        { cat: 'FATAL', title: 'Unknown Cause - Found unresponsive', time: '08:30' }
    ];
    let html = '';
    samples.forEach(s => {
        let color = s.cat === 'FATAL' ? 'var(--c-fatal)' : (s.cat === 'CRIT' ? 'var(--c-crit)' : 'var(--c-acc)');
        html += `<div style="padding:10px; border-bottom:1px solid rgba(255,255,255,0.05); border-left:3px solid ${color}; margin-bottom:5px;">
            <span style="color:#666; font-size:10px;">[${s.time}]</span>
            <span style="color:#ddd;">${s.title}</span>
        </div>`;
    });
    stream.innerHTML = html;
}
</script>
</body>
</html>